(function(e){var d={};e.extend({publish:function(c,a){var b=a||{},e=b.args||[],g=b.scope||this,f=function(){var a,b;if(d[c]){b=d[c];for(a=b.length-1;0<=a;a-=1)b[a].apply(g,e)}};b.sync?setTimeout(f,0):f()},subscribe:function(c,a){d[c]||(d[c]=[]);d[c].push(a);return[c,a]},subscribeOnce:function(c,a){var b=e.subscribe(c,function(){var c=b;a.apply(this,arguments);e.unsubscribe(c)})},unsubscribe:function(c){var a=c[0],b=d[a].length-1;if(d[a])for(;0<=b;)d[a][b]===c[1]&&d[a].splice(d[a][b],1),b-=1}})})(jQuery);
